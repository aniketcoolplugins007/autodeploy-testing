name: Plugin Check + Deploy to WordPress.org

on:
  push:
    branches:
      - "**"

jobs:
  plugin-check:
    name: Run WordPress Plugin Check (PCP)
    uses: CoolPluginsTeam/cool-plugins-ci/.github/workflows/plugin-check.yml@main
    with:
      plugin-folder: full-repo-scan  # üëà this will contain your whole repo inside /wp-content/plugins/

  deploy:
    name: Deploy to WordPress.org
    runs-on: ubuntu-latest
    needs: plugin-check
    if: success()
    steps:
      - name: Print success text
        run: echo "‚úÖ Plugin Check passed ‚Äî deploying to WordPress.org"

  failure:
    name: Print failure text
    runs-on: ubuntu-latest
    needs: plugin-check
    if: failure()
    steps:
      - name: Print failure text
        run: echo "‚ùå Plugin Check failed. Please review the GitHub Actions log for details."
